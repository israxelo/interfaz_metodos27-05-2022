select value from v$parameter where name='service_names'





--funcion registro
create or replace FUNCTION REGISTRO (EMA VARCHAR2,CONTRA VARCHAR2)
RETURN NUMBER
AS
EMAILAUX VARCHAR2(30);
BEGIN
SELECT EMAIL INTO EMAILAUX 
FROM CLIENTES 
WHERE (EMAIL = EMA) AND (CONTRA = CONTRASEÃ‘A);
RETURN 1;
EXCEPTION
WHEN NO_DATA_FOUND
THEN
RETURN -1;
END;
--funcion ver_reparaciones
CREATE OR REPLACE FUNCTION VER_REPARACIONES(EMAILAUX CLIENTES.EMAIL%TYPE)
RETURN VARCHAR2
AS
CURSOR CUR1 IS SELECT MODELO,DESCRIPCION,DIRECCION,EMAIL FROM CONSOLAS_ROTAS WHERE EMAIL = EMAILAUX;
CADENA VARCHAR2(700):='';
BEGIN
FOR REG IN CUR1 
LOOP
CADENA := CADENA ||'  '||REG.MODELO||'  '||REG.DESCRIPCION||'  '||REG.DIRECCION||'  '||REG.EMAIL||+chr(10);
END  LOOP;
DBMS_OUTPUT.PUT_LINE(CADENA);
RETURN CADENA;
END;
--funcion hacer pedidos

CREATE OR REPLACE FUNCTION HACER_PEDIDO(CODI VARCHAR2,TIPO VARCHAR2,CORREO VARCHAR2,DIAS NUMBER)
RETURN NUMBER
AS
PRECIOAUX NUMBER(4):=0;
AUXCOD VARCHAR2(40);
BEGIN
SELECT COD_VIDEOJUEGO INTO AUXCOD FROM VIDEOJUEGO WHERE COD_VIDEOJUEGO =CODI;
IF TIPO = 'COMPRA'
THEN 
INSERT INTO PEDIDOS 
SELECT 'COMPRA',TITULO,CORREO,PRECIO,SYSDATE FROM VIDEOJUEGO WHERE COD_VIDEOJUEGO = CODI;
COMMIT;
RETURN 1;
ELSE 
IF DIAS = 10
THEN 
PRECIOAUX := 12;
ELSIF DIAS = 15 
THEN
PRECIOAUX := 16;
ELSE
PRECIOAUX:=19;
END IF;
INSERT INTO PEDIDOS
SELECT 'ALQUILER',TITULO,CORREO,PRECIOAUX,SYSDATE FROM VIDEOJUEGO WHERE COD_VIDEOJUEGO = CODI;
COMMIT;
RETURN 1;
END IF;
EXCEPTION
WHEN NO_DATA_FOUND
THEN
RETURN -1;  
END;

